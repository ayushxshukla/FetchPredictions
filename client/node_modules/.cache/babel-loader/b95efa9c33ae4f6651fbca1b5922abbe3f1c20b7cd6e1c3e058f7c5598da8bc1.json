{"ast":null,"code":"// src/components/InputPage/InputPage.js\nimport React,{useState,useEffect}from\"react\";// import \"./InputPage.scss\";\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InputPage=()=>{const[link,setLink]=useState(\"\");const[placeholder,setPlaceholder]=useState(\"\");useEffect(()=>{// Retrieve the link from backend and set it as placeholder\nconst fetchLink=async()=>{try{const response=await fetch(\"https://fetchpredictions.onrender.com/api/settings\");if(!response.ok)throw new Error(\"Failed to fetch redirect link\");const data=await response.json();setPlaceholder(data.redirectLink||\"\");setLink(data.redirectLink||\"\");}catch(error){console.error(\"Failed to fetch redirect link\",error);setPlaceholder(\"\");setLink(\"\");}};fetchLink();},[]);const handleLinkChange=e=>{setLink(e.target.value);};const handleSubmit=async e=>{e.preventDefault();// Ensure the link includes the protocol\nconst fullLink=link.startsWith(\"http://\")||link.startsWith(\"https://\")?link:\"http://\".concat(link);try{const response=await fetch(\"https://fetchpredictions.onrender.com/api/settings\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({redirectLink:fullLink})});if(!response.ok)throw new Error(\"Failed to update redirect link\");// Optionally, you can display a success message here\nconsole.log(\"Redirect link updated successfully\");}catch(error){console.error(\"Failed to submit link\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"input-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Enter Redirect Link\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"link\",children:\"Link:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"link\",value:link,onChange:handleLinkChange,placeholder:\"\"// Ensuring the placeholder is displayed correctly\n})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]})]});};export default InputPage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","InputPage","link","setLink","placeholder","setPlaceholder","fetchLink","response","fetch","ok","Error","data","json","redirectLink","error","console","handleLinkChange","e","target","value","handleSubmit","preventDefault","fullLink","startsWith","concat","method","headers","body","JSON","stringify","log","className","children","onSubmit","htmlFor","type","id","onChange"],"sources":["/Users/ayushshukla/Desktop/ayushpred/client/src/components/InputPage/InputPage.jsx"],"sourcesContent":["// src/components/InputPage/InputPage.js\nimport React, { useState, useEffect } from \"react\";\n// import \"./InputPage.scss\";\n\nconst InputPage = () => {\n  const [link, setLink] = useState(\"\");\n  const [placeholder, setPlaceholder] = useState(\"\");\n\n  useEffect(() => {\n    // Retrieve the link from backend and set it as placeholder\n    const fetchLink = async () => {\n      try {\n        const response = await fetch(\n          \"https://fetchpredictions.onrender.com/api/settings\"\n        );\n        if (!response.ok) throw new Error(\"Failed to fetch redirect link\");\n        const data = await response.json();\n        setPlaceholder(data.redirectLink || \"\");\n        setLink(data.redirectLink || \"\");\n      } catch (error) {\n        console.error(\"Failed to fetch redirect link\", error);\n        setPlaceholder(\"\");\n        setLink(\"\");\n      }\n    };\n\n    fetchLink();\n  }, []);\n\n  const handleLinkChange = (e) => {\n    setLink(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // Ensure the link includes the protocol\n    const fullLink =\n      link.startsWith(\"http://\") || link.startsWith(\"https://\")\n        ? link\n        : `http://${link}`;\n\n    try {\n      const response = await fetch(\n        \"https://fetchpredictions.onrender.com/api/settings\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ redirectLink: fullLink }),\n        }\n      );\n\n      if (!response.ok) throw new Error(\"Failed to update redirect link\");\n\n      // Optionally, you can display a success message here\n      console.log(\"Redirect link updated successfully\");\n    } catch (error) {\n      console.error(\"Failed to submit link\", error);\n    }\n  };\n\n  return (\n    <div className=\"input-page\">\n      <h1>Enter Redirect Link</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"link\">Link:</label>\n          <input\n            type=\"text\"\n            id=\"link\"\n            value={link}\n            onChange={handleLinkChange}\n            placeholder=\"\"\n            // Ensuring the placeholder is displayed correctly\n          />\n        </div>\n        <button type=\"submit\">Save</button>\n      </form>\n    </div>\n  );\n};\n\nexport default InputPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}